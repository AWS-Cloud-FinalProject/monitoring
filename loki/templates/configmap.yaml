apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-loki-config
  namespace: monitoring
data:
  local-config.yaml: |
    auth_enabled: {{ .Values.config.auth_enabled }}
    server:
      http_listen_port: {{ .Values.config.server.http_listen_port }}
    common:
      path_prefix: {{ .Values.config.common.path_prefix }}
      storage:
        filesystem:
          chunks_directory: {{ .Values.config.common.storage.filesystem.chunks_directory }}
          rules_directory: {{ .Values.config.common.storage.filesystem.rules_directory }}
    schema_config:
      configs:
        {{- toYaml .Values.config.schema_config.configs | nindent 8 }}
    storage_config:
      boltdb_shipper:
        {{- toYaml .Values.config.storage_config.boltdb_shipper | nindent 8 }}
      filesystem:
        {{- toYaml .Values.config.storage_config.filesystem | nindent 8 }}
    limits_config:
      {{- toYaml .Values.config.limits_config | nindent 6 }} 